import{d as f}from"./pinia-BXXl-SmG.js";import{m as d}from"./marked.esm-CrmhQBcZ.js";import{u as m,R as v,W as A,O as g}from"./auth-dzuJufgy.js";import{u as _}from"./websocket-Cgz6NUB5.js";import{a as h}from"./api-C-PlNVV_.js";import{b as S,w}from"./index-Du_3Vesk.js";const I=m(),k=0,y=5,x=10,H=20,i=9e3,L={0:"Hidden",5:"Visible",10:"Trial",20:"Standard",9e3:"Admin"},V=f("apps",()=>{const s=S(null),c=_();async function r(a=!1){!a&&s.value!==null||await navigator.locks.request("webapp_init_apps",async()=>{if(!a&&s.value!==null)return;const e=(await h.get("/get_available_applications")).data,t={};for(const n in e){const o=e[n];o.description?o.text=d(o.description,{mangle:!1,headerIds:!1}):o.text="",t[o.id]=o}s.value=t})}async function l(){await r(!0)}async function p(a){l()}async function u(a){}return c.onmessage(l,"apps"),c.onmessage(p,"reload_app"),c.onmessage(u,"update_frontend"),c.onreconnect(l),w(()=>I.isAuthenticated,a=>{a&&s.value===null&&r()}),{apps:s,load:r,hasAccess:(a,e)=>{if(s.value==null||!(a in s.value))return!1;const t=s.value[a].access_level;let n=!0;return e&v&&n&&(n=t>=y),e&A&&n&&(n=t>=i),e&g&&n&&(n=t>=i),e&i&&n&&(n=t>=i),n}}});export{i as A,k as H,H as S,x as T,y as V,L as a,V as u};

import{e as $,aq as P,h as l,ai as ee,aw as te,ax as ne,g as ae,ay as oe,k as R,j as ie,i as le,b as A,az as se,aA as re,c as x,w as L,aB as de,ac as D,aC as ue,aD as ce,f as ge,T as H,s as fe,d as me,a6 as he,p as ve,I,v as T,a9 as C,Q as q,u as be,ab as xe}from"./index-Du_3Vesk.js";import{Q as Se}from"./QItem-DtTTb-ec.js";import{Q}from"./QItemSection-CpQhvstY.js";import{Q as N}from"./QItemLabel-CcbGqN9l.js";import{Q as B}from"./QTooltip-CsZJC6ig.js";import{d as ye,e as we}from"./utils-BH9nH3nv.js";import{a as Ie}from"./api-C-PlNVV_.js";const Te=$({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:d,emit:y}){let r=!1,g,a,o=null,s=null,i,f;function S(){g&&g(),g=null,r=!1,o!==null&&(clearTimeout(o),o=null),s!==null&&(clearTimeout(s),s=null),a!==void 0&&a.removeEventListener("transitionend",i),i=null}function u(n,c,h){c!==void 0&&(n.style.height=`${c}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,g=h}function m(n,c){n.style.overflowY=null,n.style.height=null,n.style.transition=null,S(),c!==f&&y(c)}function _(n,c){let h=0;a=n,r===!0?(S(),h=n.offsetHeight===n.scrollHeight?0:void 0):(f="hide",n.style.overflowY="hidden"),u(n,h,c),o=setTimeout(()=>{o=null,n.style.height=`${n.scrollHeight}px`,i=v=>{s=null,(Object(v)!==v||v.target===n)&&m(n,"show")},n.addEventListener("transitionend",i),s=setTimeout(i,e.duration*1.1)},100)}function k(n,c){let h;a=n,r===!0?S():(f="show",n.style.overflowY="hidden",h=n.scrollHeight),u(n,h,c),o=setTimeout(()=>{o=null,n.style.height=0,i=v=>{s=null,(Object(v)!==v||v.target===n)&&m(n,"hide")},n.addEventListener("transitionend",i),s=setTimeout(i,e.duration*1.1)},100)}return P(()=>{r===!0&&S()}),()=>l(ee,{css:!1,appear:e.appear,onEnter:_,onLeave:k},d.default)}}),w=te({}),pe=Object.keys(R),Oe=$({name:"QExpansionItem",props:{...R,...oe,...ae,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ne,"click","afterShow","afterHide"],setup(e,{slots:d,emit:y}){const{proxy:{$q:r}}=ie(),g=le(e,r),a=A(e.modelValue!==null?e.modelValue:e.defaultOpened),o=A(null),s=se(),{show:i,hide:f,toggle:S}=re({showing:a});let u,m;const _=x(()=>`q-expansion-item q-item-type q-expansion-item--${a.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),k=x(()=>e.contentInsetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),n=x(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),c=x(()=>{const t={};return pe.forEach(b=>{t[b]=e[b]}),t}),h=x(()=>n.value===!0||e.expandIconToggle!==!0),v=x(()=>e.expandedIcon!==void 0&&a.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),z=x(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),F=x(()=>({expanded:a.value===!0,detailsId:s.value,toggle:S,show:i,hide:f})),O=x(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[a.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":a.value===!0?"true":"false","aria-controls":s.value,"aria-label":t}});L(()=>e.group,t=>{m!==void 0&&m(),t!==void 0&&E()});function V(t){n.value!==!0&&S(t),y("click",t)}function G(t){t.keyCode===13&&j(t,!0)}function j(t,b){b!==!0&&o.value!==null&&o.value.focus(),S(t),fe(t)}function J(){y("afterShow")}function K(){y("afterHide")}function E(){u===void 0&&(u=de()),a.value===!0&&(w[e.group]=u);const t=L(a,p=>{p===!0?w[e.group]=u:w[e.group]===u&&delete w[e.group]}),b=L(()=>w[e.group],(p,X)=>{X===u&&p!==void 0&&p!==u&&f()});m=()=>{t(),b(),w[e.group]===u&&delete w[e.group],m=void 0}}function M(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},b=[l(H,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&a.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:v.value})];return z.value===!0&&(Object.assign(t,{tabindex:0,...O.value,onClick:j,onKeyup:G}),b.unshift(l("div",{ref:o,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),l(Q,t,()=>b)}function Y(){let t;return d.header!==void 0?t=[].concat(d.header(F.value)):(t=[l(Q,()=>[l(N,{lines:e.labelLines},()=>e.label||""),e.caption?l(N,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](l(Q,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>l(H,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](M()),t}function U(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:g.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return h.value===!0&&(t.clickable=!0,t.onClick=V,Object.assign(t,n.value===!0?c.value:O.value)),l(Se,t,Y)}function W(){return ue(l("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:k.value,id:s.value},ge(d.default)),[[ce,a.value]])}function Z(){const t=[U(),l(Te,{duration:e.duration,onShow:J,onHide:K},W)];return e.expandSeparator===!0&&t.push(l(D,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:g.value}),l(D,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:g.value})),t}return e.group!==void 0&&E(),P(()=>{m!==void 0&&m()}),()=>l("div",{class:_.value},[l("div",{class:"q-expansion-item__container relative-position"},Z())])}}),je=me({__name:"CopyDownloadData",props:{data:{},filename:{},fileId:{}},setup(e){const d=e,y=()=>{const a=JSON.stringify(d.data);navigator.clipboard.writeText(a)};function r(a){const o=[];function s(i){if(i&&typeof i=="object"){i.hash&&o.push(i.hash);for(const f in i)i.hasOwnProperty(f)&&s(i[f])}}return s(a),o}const g=async()=>{const a=r(d.data.component.storage);we(Ie.postBlob("zip_data_with_storage",{data:JSON.stringify(d.data),storage_hashes:a,filename:d.filename,file_id:d.fileId}))};return(a,o)=>(ve(),he(xe,null,[I(q,{color:"primary",flat:"",icon:"mdi-content-copy",onClick:y},{default:T(()=>[I(B,null,{default:T(()=>o[1]||(o[1]=[C(" Copy data to clipboard")])),_:1})]),_:1}),I(q,{color:"primary",flat:"",icon:"mdi-download",onClick:o[0]||(o[0]=s=>be(ye)({filename:`${a.filename}.json`,data:JSON.stringify(a.data),type:"application/json"}))},{default:T(()=>[I(B,null,{default:T(()=>o[2]||(o[2]=[C(" Download data")])),_:1})]),_:1}),I(q,{color:"primary",flat:"",icon:"mdi-folder-download",onClick:g},{default:T(()=>[I(B,null,{default:T(()=>o[3]||(o[3]=[C(" Download data with storage as zip")])),_:1})]),_:1})],64))}});export{Oe as Q,je as _};

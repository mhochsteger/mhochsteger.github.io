import{Q as g}from"./QSpace-k_Ok6dG2.js";import{d as h,b as y,ae as k,o as x,v as l,a7 as C,p as _,I as o,a8 as d,a9 as p,au as c,ac as Q,x as t,u as r,at as A,T as D}from"./index-Du_3Vesk.js";import{Q as z,a as T}from"./QTable-BfwWHyg7.js";import{a as m}from"./api-C-PlNVV_.js";import{b as $,e as B,a as N}from"./utils-BH9nH3nv.js";import"./auth-dzuJufgy.js";import{_ as s}from"./ButtonWithTooltip.vue_vue_type_script_setup_true_lang-GHMn38hu.js";import"./QList-C_17cm5H.js";import"./QChip-H_55yLGh.js";import"./QItem-DtTTb-ec.js";import"./QItemSection-CpQhvstY.js";import"./QItemLabel-CcbGqN9l.js";import"./QTooltip-CsZJC6ig.js";import"./selection-BDLl0KOp.js";import"./format-CJebrXOQ.js";import"./axios-CInKXjoT.js";import"./index-3fevySbJ.js";import"./pinia-BXXl-SmG.js";const X=h({__name:"AppDevelopmentComponent",setup(S){const n=y([]),f=async()=>{const a=(await m.post("/app_admin/my_apps")).data;n.value=a},b=async()=>{B(m.getBlob("/pyodide/client_package/webapp_client"))},w=async a=>{await N("delete",`${a.name} with id ${a.id}`)&&await m.post("/app_admin/delete_app",{app_id:a.id})&&(n.value=n.value.filter(i=>i.id!==a.id))},v=()=>{window.open("/docs/index.html","_blank").focus()};return k(f),(a,e)=>(_(),x(C,{flat:""},{default:l(()=>[o(d,{class:"text-h2 row"},{default:l(()=>[e[0]||(e[0]=p(" App Development ")),o(g),o(s,{class:"q-mx-xs bg-accent text-white",size:"md",label:"webapp-client","no-caps":"",onClick:b}),o(s,{class:"q-mx-xs bg-accent text-white",size:"md",label:"Documentation","no-caps":"",onClick:c(v,["stop"])})]),_:1}),o(Q),o(d,null,{default:l(()=>[e[1]||(e[1]=t("div",{class:"text-h3 row"},"Your Apps",-1)),o(z,{class:"col-auto",flat:"",rows:r(n),pagination:{rowsPerPage:10},"hide-bottom":r(n).length<=10,columns:[{label:"Name",field:"name",name:"name",align:"left",sortable:!0},{label:"Version",field:"version",name:"version",align:"left",sortable:!0},{label:"Default access",field:"default_access_level_v",name:"default_access_level",sortable:!0},{label:"Actions",field:"actions",name:"actions",align:"center"}],"wrap-cells":""},{"body-cell-actions":l(({row:i})=>[o(T,{class:"text-center"},{default:l(()=>[t("div",null,[o(s,{size:"lg",color:"primary",icon:"settings",tooltip:"App management",onClick:c(u=>r(A).push({path:"/admin/app",query:{appId:i.id}}),["stop"])},null,8,["onClick"]),o(s,{size:"lg",icon:"mdi-dev-to",tooltip:"Create dev command to serve this app",color:"accent",onClick:u=>r($)(i)},null,8,["onClick"]),o(s,{size:"lg",icon:"delete",tooltip:"Delete app",color:"negative",onClick:u=>w(i)},null,8,["onClick"])])]),_:2},1024)]),_:1},8,["rows","hide-bottom"])]),_:1}),o(d,{style:{"max-width":"1200px"}},{default:l(()=>[e[12]||(e[12]=t("h2",{class:"text-h6"},"How to create an app",-1)),t("ol",null,[e[4]||(e[4]=t("li",null,[p(" Download webapp_client (button at the top right) and install it running "),t("pre",null,"python -m pip install webapp_client*.whl watchdog websockets wheel colorama")],-1)),e[5]||(e[5]=t("li",null,'Go to "Apps" and open the AppCreator app',-1)),e[6]||(e[6]=t("li",null,'Fill out the fields and click "Create"',-1)),e[7]||(e[7]=t("li",null," This will download a zip file with the app code. Extract it, go to the created directory and run ",-1)),e[8]||(e[8]=t("li",null,[t("pre",null,"python -m pip install -e .")],-1)),t("li",null,[e[2]||(e[2]=p(" Click on the ")),o(D,{name:"mdi-dev-to",size:"lg",color:"accent"}),e[3]||(e[3]=p(" icon of the new app to copy the serve command to the clipboard "))]),e[9]||(e[9]=t("li",null,"Open a command line, paste the command and press enter",-1)),e[10]||(e[10]=p(" The command should look like this: ")),e[11]||(e[11]=t("pre",null,"python -m webapp_client.cli.serve_app 'backend_url' 'dev_token' 'app_id' 'python_module_of_app'",-1))]),e[13]||(e[13]=t("p",null," Once you run the command, the app will be uploaded and is visible in your dashboard. Every time you change the source code locally, the app is automatically updated on the server and in the browser. You don't need to reload the website. Steps 1-5 are only needed once. ",-1))]),_:1})]),_:1}))}});export{X as default};
